class MenuItem{constructor(i){this.item=i,this.title=i.find("> a > span").text().toLowerCase(),this.child=MenuItem.prepareList(i)}checkContains(i){let e=this.checkValue(i);return this.hasChild()&&(this.checkChild(i)?(this.openTreeview(),e=!0):this.closeTreeview()),this.toggleVisibility(e),e}checkValue(i){return this.title.includes(i)}hasChild(){return 0<this.child.length}checkChild(e){let t=!1;return this.child.forEach(i=>{t=i.checkContains(e)||t}),t}openTreeview(){this.item.hasClass("active")||(this.item.addClass("menu-open"),this.item.find("> ul").slideDown(500))}closeTreeview(){this.item.hasClass("active")||(this.item.removeClass("menu-open"),this.item.find("> ul").slideUp(500))}clearVisibility(){this.toggleVisibility(!0),this.hasChild()&&(this.closeTreeview(),this.child.forEach(i=>{i.clearVisibility()}))}toggleVisibility(i){i?this.item.show():this.item.hide()}static prepareList(i){let t=[];return i.find("> ul > li:not(.header)").each((i,e)=>{t.push(new MenuItem($(e)))}),t}}
class SearchMenuFilter{constructor(){this.input=$("#menu-search [name='q']"),this.list=MenuItem.prepareList(this.input.closest("section"))}listenInput(){this.input.on("input",()=>{this.filterList(this.input.val().toLowerCase().trim())})}filterList(i){this.list.forEach(t=>{""===i?t.clearVisibility():t.checkContains(i)})}}
const typograf=new Typograf({locale:["ru","en-US"],htmlEntity:{type:"name",onlyInvisible:!0}});function executeTyporgafButton(e){const t=$(e.data("typograf-element"));0<t.length&&t.val(typograf.execute(t.val()))}typograf.enableRule("common/nbsp/afterNumber");
window.Typograf=Typograf,$(document).ready(function(){(new SearchMenuFilter).listenInput()}),$(document).on("click","[data-typograf-element]",function(e){executeTyporgafButton($(this))});